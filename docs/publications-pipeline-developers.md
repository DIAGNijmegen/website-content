# Publications pipeline for developers

The publications pipeline processes the `diag.bib` to generate the list of publications of the members of a team/website. The pipeline is composed by:
- **Bib parsing** (developed by Bart): The Bibtex plugin processes the `diag.bib` to obtain the full list of publications and authors found in `diag.bib`. This plugin is located on `plugins\bibtex\`
- **Post-processing** (developed by Gabriel): A website should show only publications of their members. All the post-processing is done on `plugins\bib_writer.py` by `PublicationsGenerator` class. This script stores metadata in `$WEBISTE/content/dict_pubs.json` and is subdivided in small tasks:
  - **List of members**: This is collected in `__get_list_people()` from `PublicationsGenerator` class. It collects the list of members available on `$WEBISTE/content/pages/members/*.md`
  - **Filtering out publications**: The output of the Bib parsing is taken to match the list of members/authors to obtain a list of publications that belong to the members of the current team. This is done in `__get_publications_by_author` from `PublicationsGenerator` class
  - **Write publications (one per bibentry)**: Markdown files are generated per publication. This is done in `__write_single_publication_md` from `PublicationsGenerator` class. This function automatically detects whether the publication is:
    - **Thesis**: For instance, this script generated a MD file for the bibkey `bejn17a` and stored it on `$WEBISTE/content/pages/publications/bejn17a.md`. Pelican used the template located on [/radboudumc-template/templates/publication-thesis.html](https://github.com/DIAGNijmegen/website-content/blob/master/radboudumc-template/templates/publication-thesis.html) to generate [Babak's Thesis](https://www.computationalpathologygroup.eu/publications/bejn17a/)
    - **Scientific paper**: For instance, this script generated a MD file for the bibkey `balo18` and stored it on `$WEBISTE/content/pages/publications/balo18.md`. Pelican used the template located on [/radboudumc-template/templates/publication.html](https://github.com/DIAGNijmegen/website-content/blob/master/radboudumc-template/templates/publication.html) to generate [balo18](https://www.computationalpathologygroup.eu/publications/balo18/)
  - **Write list of publications of an author**: This is done in `__write_author_publications_md()` from `PublicationsGenerator` class. The MD file contains only the list of bibkeys, the template loads metadata from `$WEBISTE/content/dict_pubs.json` file. Sample: [Francesco's publications](https://www.computationalpathologygroup.eu/publications/francesco-ciompi/), MD file path: `$WEBISTE/content/pages/publications/francesco-ciompi.md`. Template used: [/radboudumc-template/templates/publications-author.html](https://github.com/DIAGNijmegen/website-content/blob/master/radboudumc-template/templates/publications-author.html)
  - **Store list of publications of the team**: The function `__write_list_publications_md()` from `PublicationsGenerator` class  stores metadata in `$WEBISTE/content/dict_pubs.json` file with all the publications of the members of the team. Sample: [List of publications](https://www.computationalpathologygroup.eu/publications/)  of the Computational Pathology group. Template used: [/radboudumc-template/templates/publications.html](https://github.com/DIAGNijmegen/website-content/blob/master/radboudumc-template/templates/publications.html). No MD is generated, `$WEBISTE/content/dict_pubs.json` contains already the information neededto generate this list
